<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>EjERCICIO AJAX PHP</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <script>
        let xhr;
        let text;
        let letra;
        let resu;

        document.addEventListener('DOMContentLoaded', inicializar);

        function inicializar(event) {
            text = document.getElementsByTagName('input')[0];
            resu = document.getElementsByTagName('span')[0];

            text.addEventListener('keyup', enviarDatos);
        }

        function enviarDatos(event) {
            xhr = new XMLHttpRequest();
            xhr.addEventListener('readystatechange', gestionDatos, false);
            xhr.open('POST', 'datos.php', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send('q=' + text.value);
        }

        function gestionDatos(event) {
            if (event.target.readyState == 4 && event.target.status == 200) {
                resu.innerHTML = event.target.responseText;
            }
        }

    </script>
</head>

<body>
    <div class="container">
        <header class="text-center">
            <h1>Ejercicio propuesto 3</h1>
            <hr />
            <p class="lead">Autocompletado de un campo</p>
        </header>
        <div class="col-lg-6" style="margin-bottom:50px;">
            <form class="form">
                Buscar por nombre: <input type="text">
            </form>
            <br />
            <br />
            <b>Resultados</b>
            <br />
            <br />
            <span id="resultado"></span>
        </div>
        <footer class="col-lg-12 text-center">
            EJERCICIO DE AUTOCOMPLETADO CON AJAX
        </footer>
    </div>
</body>

</html>